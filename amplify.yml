# amplify.yml
version: 1
applications:
  - appRoot: .                 # raiz do seu repo (onde está o package.json)
    frontend:
      framework: nextjs        # declara o framework Next.js para pular a detecção
      phases:
        preBuild:
          commands:
            - nvm install 20
            - nvm use 20
            - npm ci --legacy-peer-deps
        build:
          commands:
            - npm run build    # já faz next build && next export
      artifacts:
        baseDirectory: out      # pasta gerada pelo next export
        files:
          - '**/*'
      cache:
        paths:
          - node_modules/**/*